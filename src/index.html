<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="../style/webgl.css" type="text/css">
    <script src="../dist/game-bundle.js" type="text/javascript"></script>

    <!-- Fragment Shader -->
    <script id="shader-fs" type="x-shader/x-fragment">
        precision mediump float;

        varying vec3 vLightWeighting;
        varying vec2 vTextureCoordinate;

        uniform bool uUseTexture;

        uniform sampler2D uSampler;

         void main(void) {
            vec4 color;
            if (uUseTexture) {
                color = texture2D(uSampler, vec2(vTextureCoordinate.s, vTextureCoordinate.t));
            } else {
		        color = vec4(1.0, 0.3, 0.5, 1.0);
		    }

            gl_FragColor = vec4(color.rgb * vLightWeighting, 1.0);
         }
    </script>

    <script id="shader-vs" type="x-shader/x-vertex">
        attribute vec3 aVertexPosition;
        attribute vec3 aVertexNormal;
        attribute vec2 aTextureCoordinate;

        uniform mat4 uModelMatrix;
        uniform mat4 uProjectionMatrix;
        uniform mat3 uNormalMatrix;
        uniform mat4 uViewMatrix;

        uniform vec3 uAmbientColor;	// ambient color uniform
        uniform vec3 uDirectionalColor;		// light color
        uniform vec3 uLightingDirection;	// light direction uniform

        uniform bool uUseTexture;

        varying vec3 vLightWeighting;
        varying vec2 vTextureCoordinate;


        void main(void) {
            gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
            if (uUseTexture) {
                vTextureCoordinate = aTextureCoordinate;
            }

            vec3 transformedNormal = uNormalMatrix * aVertexNormal;

            // calculate weight for directional light
		    float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);

            // calculate lighting
            vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;
        }

    </script>
    <!-- Vertex Shader -->


    <title>WebGL Object Import</title>
</head>
    <body>
        <h1>WebGL - Object Import</h1>

        <div id="content">
            <canvas id="glcanvas" width="1280px" height="720px">
                No <code>&lt;canvas&gt;</code> support in your browser.
            </canvas>
            <br />
        </div>
    </body>
</html>