<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="./style/webgl.css" type="text/css">
    <script src="./js/jquery-3.2.1.min.js" ></script>
    <script src="./node_modules/cannon/build/cannon.min.js"></script>
    <script src="./js/glMatrix-0.9.5.min.js" type="text/javascript"></script> <!-- Load this script before object-import-demo.js -->
    <script src="./js/webgl-obj-loader.js" type="text/javascript"></script>
    <script src="js/object-import-demo.js" type="text/javascript"></script>


    <!-- Fragment Shader -->
    <script id="shader-fs" type="x-shader/x-fragment">
        precision mediump float;

        varying vec3 vLightWeighting;

         void main(void) {
            vec3 color = vec3(0.5, 0.5, 1);
            gl_FragColor = vec4(color.rgb * vLightWeighting, 1.0);

         }
    </script>

    <script id="shader-vs" type="x-shader/x-vertex">
        attribute vec3 aVertexPosition;
        attribute vec3 aVertexNormal;

        uniform mat4 uMVMatrix; // Model-View Matrix
        uniform mat4 uPMatrix;  // Projection Matrix
        uniform mat3 uNMatrix; // Normal matrix

        uniform vec3 uAmbientColor;	// ambient color uniform
        uniform vec3 uDirectionalColor;		// light color
        uniform vec3 uLightingDirection;	// light direction uniform

        varying vec3 vLightWeighting;

        void main(void) {
            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);

            vec3 transformedNormal = uNMatrix * aVertexNormal;

            // calculate weight for directional light
		    float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);

            // calculate lighting


            vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;
        }

    </script>
    <!-- Vertex Shader -->


    <title>WebGL Object Import</title>
</head>
    <body onload="start()">
        <h1>WebGL - Object Import</h1>

        <div id="content">
            <canvas id="glcanvas" width="1280px" height="720px">
                No <code>&lt;canvas&gt;</code> support in your browser.
            </canvas>
            <br />
            <a href="./"><- Back</a>
        </div>
    </body>
</html>